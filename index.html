<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>丈八一路酒店信息管理</title>
    <style>
        body {
            font-family: "Helvetica Neue", system-ui, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fb;
            min-height: 100vh;
            position: relative;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
            padding-bottom: 140px;
        }
        .home {
            text-align: center;
            padding: 24px;
        }
        .home h1 {
            margin-bottom: 28px;
            color: #1a1d1f;
            font-size: 28px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        #searchInput, #searchStatus {
            padding: 14px 16px;
            margin: 12px 0;
            width: 100%;
            max-width: 560px;
            border-radius: 10px;
            border: 2px solid #e2e4e8;
            box-sizing: border-box;
            font-size: 16px;
            height: 52px;
            transition: border-color 0.2s;
        }
        #searchInput:focus, #searchStatus:focus {
            border-color: #4a90e2;
            outline: none;
        }
        .distance-options {
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-width: 560px;
        }
        .distance-options label {
            padding: 14px;
            border: 2px solid #e2e4e8;
            border-radius: 10px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 15px;
            color: #454950;
            transition: all 0.2s;
        }
        .distance-options label:hover {
            border-color: #4a90e2;
        }
        /* 统一按钮容器样式 */
        .button-group,
        .footer-buttons {
            max-width: 560px;
            margin: 24px auto;
            display: flex;
            justify-content: space-between;
            gap: 20px;
            width: 100%;
        }
        /* 统一按钮样式 */
        .button-style {
            flex: 1;
            padding: 16px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
            min-width: 160px;
            height: 52px;
            font-weight: 500;
            box-shadow: 0 3px 6px rgba(74,144,226,0.15);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .button-style:hover {
            background-color: #357abd;
            box-shadow: 0 4px 8px rgba(74,144,226,0.25);
        }
        .header {
            position: sticky;
            top: 0;
            background-color: #fff;
            padding: 18px 24px;
            border-bottom: 2px solid #e2e4e8;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: space-between;
        }
        .header h1 {
            font-size: 20px;
            margin: 0;
            color: #1a1d1f;
            font-weight: 600;
        }
        .hotel-list {
            display: none;
        }
        .hotel-item {
            border: 2px solid #e2e4e8;
            margin: 20px 0;
            padding: 24px;
            background-color: #fff;
            border-radius: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .hotel-item.collapsed .details {
            display: none;
        }
        .hotel-name {
            margin-bottom: 12px;
            cursor: pointer;
        }
        .controls-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .detail-item {
            margin: 18px 0;
            display: flex;
            align-items: center;
            gap: 18px;
        }
        .detail-item label {
            min-width: 64px;
            font-size: 15px;
            color: #5f6368;
            font-weight: 500;
        }
        .detail-item input, 
        .detail-item textarea {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e4e8;
            border-radius: 8px;
            font-size: 15px;
            height: 44px;
            transition: border-color 0.2s;
        }
        .detail-item textarea {
            height: 80px;
            resize: vertical;
            line-height: 1.5;
        }
        .distance-row {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .distance-input {
            width: 100px;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #e2e4e8;
        }
        .footer-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            background-color: #fff;
            padding: 22px;
            border-top: 2px solid #e2e4e8;
            z-index: 1000;
            box-sizing: border-box;
        }
        .small-button {
            padding: 10px 24px;
            font-size: 14px;
            min-width: 80px;
            height: 38px;
            border-radius: 8px;
            font-weight: 500;
        }
        .save-notice {
            position: fixed;
            top: 28px;
            left: 50%;
            transform: translateX(-50%);
            background: #4a90e2;
            color: white;
            padding: 14px 28px;
            border-radius: 10px;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 15px;
        }
        .distance-link {
            color: #4a90e2;
            cursor: pointer;
            float: right;
            font-weight: 500;
            font-size: 15px;
            transition: opacity 0.2s;
        }
        .distance-link:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="home" id="homePage">
            <h1>丈八一路酒店信息</h1>
            <input type="text" id="searchInput" placeholder="按酒店名称搜索...">
            <select id="searchStatus">
                <option value="">所有状态</option>
                <option value="待定">待定</option>
                <option value="跟进">跟进</option>
                <option value="合作">合作</option>
                <option value="放弃">放弃</option>
            </select>
            <div class="distance-options">
                <label><input type="checkbox" name="distance" value="all" checked> 全部</label>
                <label><input type="checkbox" name="distance" value="0-1"> 1km内</label>
                <label><input type="checkbox" name="distance" value="1-2"> 1-2km</label>
                <label><input type="checkbox" name="distance" value="2-3"> 2-3km</label>
                <label><input type="checkbox" name="distance" value="3-4"> 3-4km</label>
                <label><input type="checkbox" name="distance" value="4+"> 4km+</label>
            </div>
            <div class="button-group">
                <button class="button-style" onclick="searchHotels()">酒店搜索</button>
                <button class="button-style" onclick="showRandomHotels()">随机推荐</button>
            </div>
        </div>
        <div class="header" id="listHeader">
            <h1>酒店详情</h1>
            <button class="small-button" id="toggleBtn" onclick="toggleDetails()">折叠</button>
        </div>
        <div class="hotel-list" id="hotelList"></div>
    </div>

    <div class="footer-buttons">
        <button class="button-style" onclick="showHome()">返回首页</button>
        <button class="button-style" onclick="openLifeMuseum()">欢喜生活馆</button>
    </div>
    
    <div class="save-notice" id="saveNotice">✓ 保存成功！</div>

    <script>
        // 完整酒店数据
        const fullHotels = [
            { name: "西安绿地假日酒店", address: "西安市雁塔区锦业路5号", phone: "029-68689999", rooms: "约200间", distance: 0.2 },
            { name: "桔子酒店 (西安高新区锦业路店)", address: "锦业路与丈八一路交叉口东北角", phone: "+86 29-6825-9777", rooms: "约80-100间", distance: 0.3 },
            { name: "西安蓝溪国际酒店", address: "锦业路70号", phone: "029-6566 8888", rooms: "约150间", distance: 0.8 },
            { name: "亚朵酒店(西安高新店)", address: "锦业路32号", phone: "029-6820 6666", rooms: "约120间", distance: 1.2 },
            { name: "全季酒店(西安高新管委会店)", address: "锦业路1号", phone: "029-8833 6666", rooms: "约90间", distance: 1.5 },
            { name: "汉庭酒店(西安高新医院店)", address: "锦业路39号", phone: "029-6821 8888", rooms: "约60间", distance: 2.1 },
            { name: "维也纳国际酒店(西安高新店)", address: "锦业路50号", phone: "029-6823 8888", rooms: "约130间", distance: 2.8 },
            { name: "美豪丽致酒店(西安高新店)", address: "锦业路65号", phone: "029-6826 6666", rooms: "约100间", distance: 3.2 },
            { name: "如家快捷酒店(西安高新店)", address: "锦业路88号", phone: "029-6829 8888", rooms: "约50间", distance: 3.9 },
            { name: "西安高新快捷旅馆", address: "锦业路68号", phone: "+86 29-8885-0060", rooms: "约15-25间", distance: 4.6 }
        ];

        // 数据存储和初始化
        const savedData = JSON.parse(localStorage.getItem('hotelData')) || {};
        let currentDisplayedIndexes = [];

        // 核心功能函数
        function generateHotelList(hotels) {
            const hotelList = document.getElementById('hotelList');
            hotelList.innerHTML = '';
            currentDisplayedIndexes = hotels.map(h => fullHotels.indexOf(h));
            
            document.getElementById('listHeader').style.display = 'flex';
            
            hotels.forEach((hotel, listIndex) => {
                const originalIndex = fullHotels.indexOf(hotel);
                const saved = savedData[originalIndex] || { 
                    status: '待定',
                    remarks: '',
                    checked: false,
                    collapsed: true,
                    distance: hotel.distance,
                    address: hotel.address,
                    phone: hotel.phone,
                    rooms: hotel.rooms,
                    editable: false
                };

                const item = document.createElement('div');
                item.className = `hotel-item${saved.collapsed ? ' collapsed' : ''}`;
                item.innerHTML = `
                    <div class="hotel-name" onclick="toggleHotel(${originalIndex}, event)">
                        <div class="controls-container">
                            <div class="controls">
                                <input type="checkbox" ${saved.checked ? 'checked' : ''} 
                                       onchange="updateChecked(${originalIndex}, this.checked)">
                                <select onchange="updateStatus(${originalIndex}, this.value)"
                                        style="padding: 4px; border-radius: 4px; margin-left:8px">
                                    ${['待定','跟进','合作','放弃'].map(v => 
                                        `<option ${saved.status === v ? 'selected' : ''}>${v}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <span class="distance-link" onclick="openMap('${hotel.name}')">
                                ${(saved.distance || hotel.distance).toFixed(1)}km
                            </span>
                        </div>
                        <div style="margin-top:8px">${hotel.name}</div>
                    </div>
                    <div class="details">
                        <div class="detail-item">
                            <label>地址：</label>
                            <input value="${saved.address || hotel.address}" 
                                   onchange="updateAddress(${originalIndex}, this.value)"
                                   ${saved.editable ? '' : 'disabled'}>
                        </div>
                        <div class="detail-item">
                            <label>电话：</label>
                            <input value="${saved.phone || hotel.phone}" 
                                   onchange="updatePhone(${originalIndex}, this.value)"
                                   ${saved.editable ? '' : 'disabled'}>
                        </div>
                        <div class="detail-item">
                            <label>房间：</label>
                            <input value="${saved.rooms || hotel.rooms}" 
                                   onchange="updateRooms(${originalIndex}, this.value)"
                                   ${saved.editable ? '' : 'disabled'}>
                        </div>
                        <div class="detail-item">
                            <label>备注：</label>
                            <textarea onchange="updateRemarks(${originalIndex}, this.value)"
                                   ${saved.editable ? '' : 'disabled'}>${saved.remarks || ''}</textarea>
                        </div>
                        <div class="detail-item">
                            <label>距离：</label>
                            <div class="distance-row">
                                <input class="distance-input" type="number" step="0.1" 
                                       value="${(saved.distance || hotel.distance).toFixed(1)}"
                                       onchange="updateDistance(${originalIndex}, this.value)"
                                       ${saved.editable ? '' : 'disabled'}>
                                <span>km</span>
                                <button class="small-button" onclick="toggleEdit(${originalIndex})">
                                    ${saved.editable ? '保存' : '修改'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                hotelList.appendChild(item);
            });
            hotelList.style.display = 'block';
        }

        // 数据操作函数
        function toggleEdit(index) {
            const hotelData = savedData[index] || {};
            hotelData.editable = !hotelData.editable;
            savedData[index] = hotelData;
            localStorage.setItem('hotelData', JSON.stringify(savedData));
            generateHotelList(currentDisplayedIndexes.map(i => fullHotels[i]));
        }

        function updateStatus(index, status) {
            savedData[index] = {...savedData[index], status};
            localStorage.setItem('hotelData', JSON.stringify(savedData));
        }

        function updateChecked(index, checked) {
            savedData[index] = {...savedData[index], checked};
            localStorage.setItem('hotelData', JSON.stringify(savedData));
        }

        // 视图控制函数
        function toggleDetails() {
            const isCollapsed = document.getElementById('toggleBtn').textContent === '折叠';
            currentDisplayedIndexes.forEach(index => {
                savedData[index] = {...savedData[index], collapsed: !isCollapsed};
            });
            generateHotelList(currentDisplayedIndexes.map(i => fullHotels[i]));
            document.getElementById('toggleBtn').textContent = isCollapsed ? '展开' : '折叠';
            localStorage.setItem('hotelData', JSON.stringify(savedData));
        }

        function toggleHotel(index, event) {
            if (event.target.tagName === 'INPUT' || 
                event.target.tagName === 'SELECT' ||
                event.target.classList.contains('distance-link')) return;
                
            savedData[index] = {...savedData[index], collapsed: !savedData[index]?.collapsed};
            generateHotelList(currentDisplayedIndexes.map(i => fullHotels[i]));
            localStorage.setItem('hotelData', JSON.stringify(savedData));
        }

        // 搜索和随机功能
        function searchHotels() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('searchStatus').value;
            const distanceFilters = Array.from(document.querySelectorAll('input[name="distance"]:checked')).map(c => c.value);
            
            const results = fullHotels.filter((hotel, index) => {
                const matchesName = hotel.name.toLowerCase().includes(searchText);
                const matchesStatus = !statusFilter || (savedData[index]?.status === statusFilter);
                const actualDistance = savedData[index]?.distance ?? hotel.distance;
                
                const matchesDistance = distanceFilters.some(range => {
                    if (range === 'all') return true;
                    const [min, max] = range.split(/[+|-]/).map(Number);
                    return range.endsWith('+') ? actualDistance > min : 
                           range.includes('-') ? actualDistance > min && actualDistance <= max :
                           actualDistance <= min;
                });
                
                return matchesName && matchesStatus && matchesDistance;
            }).sort((a, b) => (savedData[fullHotels.indexOf(a)]?.distance ?? a.distance) - 
                            (savedData[fullHotels.indexOf(b)]?.distance ?? b.distance));

            document.getElementById('homePage').style.display = 'none';
            generateHotelList(results);
        }

        function showRandomHotels() {
            const unchecked = fullHotels.filter((_, i) => !savedData[i]?.checked);
            if (unchecked.length === 0) return alert('所有酒店已勾选');
            
            const random = [];
            while (random.length < 3 && unchecked.length > 0) {
                const index = Math.floor(Math.random() * unchecked.length);
                random.push(unchecked.splice(index, 1)[0]);
            }
            
            document.getElementById('homePage').style.display = 'none';
            generateHotelList(random.sort((a, b) => a.distance - b.distance));
        }

        // 工具函数
        function openMap(name) {
            window.open(`https://uri.amap.com/search?query=${encodeURIComponent(name)}&city=西安`);
        }

        function openLifeMuseum() {
            window.open('http://www.thisnet.cn/wxurl/mini.php');
        }

        function showHome() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('hotelList').style.display = 'none';
            document.getElementById('listHeader').style.display = 'none';
        }

        // 初始化
        showHome();
    </script>
</body>
</html>
